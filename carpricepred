import streamlit as st
import pickle
import pandas as pd

with open("LinearRegression.pkl", "rb") as file:
    model = pickle.load(file)

df = pd.read_csv("Cleaned Car.csv")

companies = sorted(df["company"].unique())
fuel_types = sorted(df["fuel_type"].unique())

st.title("ðŸš— A Real Time Car Price Predictor")
st.write("Fill in the details of the car to get an insight on its price")
company = st.selectbox("Company Name", companies)
filtered_models = sorted(df[df["company"] == company]["name"].unique())
car_model = st.selectbox("Car Model", filtered_models)

year = st.number_input("Year of Manufacture", min_value=1990, max_value=2025, value=2015)

kms_driven = st.number_input("Mileage (in km)", min_value=0, max_value=200000, value=5000, step=500)

fuel_type = st.selectbox("Fuel Type", fuel_types)

input_data = pd.DataFrame([{
    "Unnamed: 0": 0, 
    "name": car_model,
    "company": company,
    "year": year,
    "kms_driven": kms_driven,
    "fuel_type": fuel_type
}])

# Prediction
if st.button("Predict Price"):
    prediction = model.predict(input_data)
    st.success(f"ðŸ’° Estimated Car Price: â‚¹ {prediction[0]:,.2f}")
